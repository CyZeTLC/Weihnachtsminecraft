server {
    listen           80;
    listen         [::]:80;
        listen         443 ssl http2;
        listen         [::]:443 ssl http2;
        server_name    gympw-mc.de;
        root           /var/www/html;
        index          index.php index.html index.htm;
        
    ssl_certificate /etc/cloudflare-certificate/cyzetlc.eu/fullchain.pem;
    ssl_certificate_key /etc/cloudflare-certificate/cyzetlc.eu/privkey.pem;
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;

    ssl_protocols TLSv1.2;
    ssl_ciphers HIGH:!aNULL:!MD5:!SHA1:!kRSA;
    ssl_prefer_server_ciphers off;

    location = server.php {
       deny all;
       return 403;
    }

    location = config.inc.php {
       deny all;
       return 403; 
    }

    location ~ ^/review/?(.*)$ {
       set $review_player $1;

       # Wenn $review_player leer ist, leite auf review.php ohne Parameter
       if ($review_player = "") {
           rewrite ^ /stats.php last;
       }

       # Sonst mit Parameter
       try_files $uri /stats.php?player=$review_player&$query_string;
    }

    location ~* \.php$ {
    	fastcgi_pass unix:/run/php/php-fpm.sock;
    	include         fastcgi_params;
    	fastcgi_param   SCRIPT_FILENAME    $document_root$fastcgi_script_name;
    	fastcgi_param   SCRIPT_NAME        $fastcgi_script_name;
    }
}